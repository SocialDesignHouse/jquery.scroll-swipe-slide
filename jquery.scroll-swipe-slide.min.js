(function(a){a.fn.scrollSwipeSlide=function(d,c){if(typeof d==="object"){c=d;}else{if(typeof d==="string"){var e=this.data("_scrollSwipeSlide");if(e){if(a.fn.scrollSwipeSlide.default_settings[d]!==undefined){if(c!==undefined){e.settings[d]=c;
return true;}else{return e.settings[d];}}else{return false;}}else{return false;}}}c=a.extend({},a.fn.scrollSwipeSlide.default_settings,c||{});return this.each(function(){var f=a(this);
var g=jQuery.extend(true,{},c);var h=new b(g);h.scrollswipeslide=f;h.initialize();f.data("_scrollSwipeSlide",h);});};a.fn.scrollSwipeSlide.default_settings={use_scrollto:true,use_swipe:true,use_keypress:true,use_history:false,base_url:"",multi_dir:false,container:".project",container_before:"",container_after:"",slides:".slide",slides_before:"",slides_after:"",nav:".slide-nav",slideshow_class:".slideshow",easing:"easeInOutExpo",scroll_time:1000,scroll_lockout:20,width:"100%",height:"100%",callback:"",skip_first:false};
function b(c){this.scrollswipeslide=null;this.settings=c;return this;}b.prototype={initialize:function(){var e=this;var c=e.settings;e.build_nav();e.set_css();
e.scrolling=false;e.this_scroll=0;e.last_scroll=0;if(c.use_history&&c.base_url){var d=window.History;if(!d.enabled){e.history=false;return false;}else{e.history=true;
}}else{e.history=false;}e.check_url();e.bind_events();c.callback.call(this);},bind_events:function(){var c=this;c.disable_scroll();a(window).resize(function(){c.set_css();
});c.enable_mousewheel();c.bind_nav();if(c.settings.use_keypress){c.enable_keys();}if(c.settings.use_swipe){c.enable_swipe();}if(c.settings.use_history&&c.history){c.bind_statechange();
}},set_css:function(){var f=this;var d=f.settings;a(d.slideshow_class).css({overflow:"hidden"});a(d.container).css({overflow:"hidden"});f.win_height=a(window).height();
f.win_width=a(window).width();if(d.width=="100%"){a(d.slideshow_class).css({width:f.win_width+"px"});var g=f.win_width-20;a(d.container).css({width:g+"px"});
}if(d.height=="100%"){a(d.slideshow_class).css({height:f.win_height+"px"});a(d.container).css({height:f.win_height+"px"});}var c=20*a(d.nav).find(".slide-circle").length;
var e=(f.win_height-c)/2;a(d.nav).css({margin:e+"px 0"});},build_nav:function(){var h=this;var g=h.settings;var j='<nav class="'+g.nav.substring(1)+'"><ul>';
var c=a(g.slideshow_class).find(g.container).length;for(var e=0;e<c;e++){var f="";if(e===0){f=" active";}j+='<li class="slide-circle'+f+'"></li>';}var d=g.container+":first-child";
a(g.slideshow_class).find(d).addClass("active");j+="</ul></nav>";h.scrollswipeslide.prepend(j);},slide_it:function(){var f=this;var e=f.settings;if(f.direction){f.scrolling=true;
var c,d;if(f.direction=="u"){if(a(e.slideshow_class).find(".active").prev(e.container).length>0){c=a(e.slideshow_class).find(".active").prev(e.container);
}else{c=a(e.slideshow_class).find(".active");}}else{if(f.direction=="d"){if(a(e.slideshow_class).find(".active").next(e.container).length>0){c=a(e.slideshow_class).find(".active").next(e.container);
}else{c=a(e.slideshow_class).find(".active");}}}d=c.index();a(e.nav).find(".active").removeClass("active");a(e.nav).find(".slide-circle:eq("+d+")").addClass("active");
a(e.slideshow_class).stop(true,true).scrollTo(c,e.scroll_time,{easing:e.easing,onAfter:function(){f.this_scroll++;scroll_timeout=setTimeout(function(){f.scrolling=false;
},e.scroll_lockout);}});f.current=c;f.update_history();if(!c.hasClass("active")){a(e.slideshow_class).find(".active").removeClass("active");c.addClass("active");
}}},update_history:function(){var g=this;if(g.history){var f=g.current;var i=f.attr("id");var h=f.data("title");var c="/"+f.data("slug");var e=f.data("year");
var d={id:i,title:h,year:e};History.pushState(d,h,c);}else{return false;}},check_url:function(){var f=this;var e=f.settings;var c=window.location.href;
if(c!=e.base_url){f.skip_first=false;var d=c.substring(e.base_url.length,window.location.href.length-1);a(e.container).each(function(){if(a(this).data("slug")==d){f.go_to=a(this).index();
var g=".slide-circle:eq("+f.go_to+")";if(!a(g).hasClass("active")){a(g).parent().find(".active").removeClass("active");a(g).addClass("active");a(e.slideshow_class).find(".active").removeClass("active");
f.go_to=a(this).index();f.move_to();}f.move_to();return false;}});}else{if(!e.skip_first){f.current=a(e.container+":first-child");f.update_history();}a(e.container+":first-child").addClass("active");
return false;}},disable_scroll:function(){var c=this;a(window).scroll(function(d){if(d.preventDefault){d.preventDefault();}return false;});a(document).on("touchmove",function(d){if(d.preventDefault){d.preventDefault();
}return false;});},enable_keys:function(){var c=this;a(document).keyup(function(f){if(f.preventDefault){f.preventDefault();}var d=f.which;if(!c.scrolling){c.direction="";
if(d==40||d==34){c.direction="d";}else{if(d==38||d==33){c.direction="u";}else{if(d==36||d==35){return false;}}}c.slide_it();}return false;});},enable_mousewheel:function(){var c=this;
a("body").bind("mousewheel",function(f,g){if(f.preventDefault){f.preventDefault();}console.log(c.settings.skip_first);if(!c.settings.skip_first||c.this_scroll>0){if(!c.scrolling){if(c.this_scroll===0||c.last_scroll!=c.this_scroll){if(g>0){c.direction="u";
}else{if(g<0){c.direction="d";}}c.slide_it();}else{return false;}c.last_scroll=c.this_scroll;}else{return false;}}else{c.scrolling=true;var d=setTimeout(function(){c.scrolling=false;
},750);c.this_scroll++;}return false;});},enable_swipe:function(){var c=this;a("body").on("swipeup",function(d){if(d.preventDefault){d.preventDefault();
}c.direction="d";c.slide_it();return false;});a("body").on("swipedown",function(d){if(d.preventDefault){d.preventDefault();}c.direction="u";c.slide_it();
return false;});},bind_nav:function(){var c=this;a("body").on("click",".slide-circle",function(d){if(!a(this).hasClass("active")){a(this).parent().find(".active").removeClass("active");
a(this).addClass("active");a(".slideshow").find(".active").removeClass("active");c.go_to=a(this).index();c.move_to();}else{return false;}});},move_to:function(){var e=this;
var d=e.settings;var c=a(".project:eq("+e.go_to+")");c.addClass("active");a(d.slideshow_class).stop(true,true).scrollTo(c,d.scroll_time,{easing:d.easing,onAfter:function(){var f=setTimeout(function(){e.scrolling=false;
},d.scroll_lockout);}});e.current=c;e.update_history();},bind_statechange:function(){History.Adapter.bind(window,"statechange",function(){var c=History.getState();
});}};})(jQuery);