(function(a){a.fn.scrollSwipeSlide=function(f,e){if(typeof f==="object"){e=f;e=a.extend({},a.fn.scrollSwipeSlide.default_settings,e||{});return this.each(function(){var i=a(this);
var h=jQuery.extend(true,{},e);var j=new b(h);j.scrollswipeslide=i;j.initialize();i.data("_scrollSwipeSlide",j);});}else{if(typeof f==="string"){switch(f){case"next_slide":break;
case"prev_slide":break;case"next_con":break;case"prev_con":break;default:var g=this.data("_scrollSwipeSlide");if(g){if(a.fn.scrollSwipeSlide.default_settings[f]!==undefined){if(e!==undefined){g.settings[f]=e;
return true;}else{return g.settings[f];}}else{return false;}}else{return false;}}}else{if(typeof f==="number"){var d=f;var c=this.data("_scrollSwipeSlide");
if(!c){return false;}else{c.go_to=d;c.switch_nav(d);}}}}};a.fn.scrollSwipeSlide.default_settings={use_scrollto:true,use_swipe:true,use_keypress:true,use_history:false,enable_scroll:false,base_url:"",base_title:"",base_title_pos:"after",base_title_sep:" | ",multi_dir:false,go_to_next_container:false,container:".project",container_before:"",container_after:"",slides:".slide",slides_before:"",slides_after:"",center_nav:true,nav:".slide-nav",nav_height:"10",slideshow_class:".slideshow",easing:"easeInOutExpo",scroll_time:1000,scroll_lockout:20,width:"100%",height:"100%",skip_first:false,callback:""};
function b(c){this.scrollswipeslide=null;this.settings=c;return this;}b.prototype={initialize:function(){var e=this;var c=e.settings;e.build_nav();if(c.multi_dir){e.multi_directional();
}e.set_css();e.scrolling=false;e.this_scroll=0;e.last_scroll=0;if(c.use_history&&c.base_url){var d=window.History;if(!d.enabled){e.history=false;return false;
}else{e.history=true;}}else{e.history=false;}e.check_url();e.bind_events();if(c.callback){c.callback.call(this);}},bind_events:function(){var c=this;c.disable_scroll();
a(window).resize(function(){c.set_css();});a(window).load(function(){c.set_css();});c.enable_mousewheel();c.bind_nav();if(c.settings.use_keypress){c.enable_keys();
}if(c.settings.use_swipe){c.enable_swipe();}if(c.settings.use_history&&c.history){c.bind_statechange();}},set_css:function(){var f=this;var d=f.settings;
a(d.slideshow_class).css({overflow:"hidden"});a(d.container).css({overflow:"hidden"});f.win_height=a(window).height();f.win_width=a(window).width();if(d.width=="100%"){a(d.slideshow_class).css({width:f.win_width+"px"});
a(d.container).css({width:f.win_width+"px"});}if(d.height=="100%"){a(d.slideshow_class).css({height:f.win_height+"px"});a(d.container).css({height:f.win_height+"px"});
}if(d.center_nav){var c=d.nav_height*a(d.nav).find(".slide-circle").length;var e=(f.win_height-c)/2;a(d.nav).css({margin:e+"px 0"});if(d.multi_dir){f.multi_dir_css();
}}},build_nav:function(){var h=this;var g=h.settings;var j='<nav class="'+g.nav.substring(1)+'"><ul>';var c=a(g.slideshow_class).find(g.container).length;
for(var e=0;e<c;e++){var f="";if(e===0){f=" active";}j+='<li class="slide-circle'+f+'"><a href="javascript:void(0);"></a></li>';}var d=g.container+":first-child";
a(d).addClass("active");a(d).find(g.slides+":first-child").addClass("current");j+="</ul></nav>";h.scrollswipeslide.prepend(j);},update_history:function(){var j=this;
var h=j.settings;if(j.history){var c=j.current;var i=c.data("slug");var f=c.attr("id");var l=c.data();var k;if(h.base_title){if(h.base_title_pos==="before"){k=h.base_title+h.base_title_sep+c.data("title");
}else{if(h.base_title_pos==="after"){k=c.data("title")+h.base_title_sep+h.base_title;}else{k=c.data("title");}}}else{k=c.data("title");}var d=h.base_url+c.data("slug");
if(h.multi_dir){var g;if(j.type=="container"&&j.row_switch){j.row_switch=false;if(c.data("active-slide")){g=parseInt(c.data("active-slide"),"")+1;}else{g=1;
}}else{g=j.slide+1;}d+="/"+g;}var e={id:f,atts:l,type:j.type};History.pushState(e,k,d);}else{return false;}},check_url:function(){var f=this;var e=f.settings;
var c=window.location.href;if(c!=e.base_url){f.skip_first=false;var d=c.substring(e.base_url.length,window.location.href.length-1);a(e.container).each(function(){if(a(this).data("slug")==d){f.go_to=a(this).index();
f.container=a(this).index();f.switch_nav(f.go_to);return false;}});}else{f.current=a(e.container+":first-child");f.container=0;f.slide=0;if(!e.skip_first){f.update_history();
}a(e.container+":first-child").addClass("active");a(e.container+":first-child").find(e.slides+":first-child").addClass("current");return false;}},disable_scroll:function(){var d=this;
var c=d.settings;a(window).scroll(function(f){if(!c.enable_scroll){if(f.preventDefault){f.preventDefault();}return false;}});a(document).on("touchmove",function(f){if(!c.enable_scroll){if(f.preventDefault){f.preventDefault();
}return false;}});},enable_keys:function(){var d=this;var c=d.settings;a(document).keyup(function(g){if(g.preventDefault){g.preventDefault();}if(c.use_keypress){var f=g.which;
if(!d.scrolling){d.direction="";if(f==40||f==34){d.direction="d";}else{if(f==38||f==33){d.direction="u";}else{if(f==36||f==35){return false;}else{if(c.multi_dir&&f==37){d.direction="l";
}else{if(c.multi_dir&&f==39){d.direction="r";}}}}}d.get_next();}}return false;});},enable_mousewheel:function(){var d=this;var c=d.settings;a("body").bind("mousewheel",function(g,h){if(!c.enable_scroll){if(g.preventDefault){g.preventDefault();
}if(!d.settings.skip_first||d.this_scroll>0){if(!d.scrolling){d.this_scroll++;if(d.this_scroll===0||d.last_scroll!=d.this_scroll){if(h>0){d.direction="u";
}else{if(h<0){d.direction="d";}}d.get_next();}d.last_scroll=d.this_scroll;}}else{d.scrolling=true;var f=setTimeout(function(){d.scrolling=false;},750);
d.this_scroll++;}}});},enable_swipe:function(){var c=this;settings=c.settings;a("body").on("swipeup",function(d){if(settings.use_swipe){if(d.preventDefault){d.preventDefault();
}c.direction="d";c.get_next();return false;}}).on("swipedown",function(d){if(settings.use_swipe){if(d.preventDefault){d.preventDefault();}c.direction="u";
c.get_next();return false;}});if(settings.multi_dir){a("body").on("swipeleft",function(d){if(settings.use_swipe&&settings.multi_dir){if(d.preventDefault){d.preventDefault();
}c.direction="r";c.get_next();return false;}}).on("swiperight",function(d){if(settings.use_swipe&&settings.multi_dir){if(d.preventDefault){d.preventDefault();
}c.direction="l";c.get_next();return false;}});}},bind_nav:function(){var d=this;var c=d.settings;a("body").on("click",".slide-circle",function(g){var f=a(this).index();
d.go_to=f;d.type="container";d.current=a(c.container+":eq("+f+")");d.update_history();});},get_next:function(){var e=this;var d=e.settings;if(e.direction){var c=e.direction;
if(c==="u"){if(a(d.slideshow_class).find(".active").prev(d.container).length>0){e.scrolling=true;e.current=a(d.slideshow_class).find(".active").prev(d.container);
e.type="container";e.go_to=e.current.index();}else{e.scrolling=false;}}else{if(c==="d"){if(a(d.slideshow_class).find(".active").next(d.container).length>0){e.scrolling=true;
e.current=a(d.slideshow_class).find(".active").next(d.container);e.type="container";e.go_to=e.current.index();}else{e.scrolling=false;}}else{if(c==="l"&&d.multi_dir){if(a(d.container+":eq("+e.container+")").find(".current").prev(d.slides).length>0){e.scrolling=true;
e.type="slide";e.go_to=a(d.container+":eq("+e.container+")").find(".current").prev(d.slides);e.slide=e.go_to.index();}else{if(d.go_to_next_container&&a(d.container+":eq("+e.container+")").prev(d.container).length>0){e.row_switch=true;
e.current=a(d.container+":eq("+e.container+")").prev(d.container);e.type="container";e.go_to=e.current.index();e.direction="u";}else{e.scrolling=false;
}}}else{if(c==="r"&&d.multi_dir){if(a(d.container+":eq("+e.container+")").find(".current").next(d.slides).length>0){console.log(a(d.container+":eq("+e.container+")").find(".current").next(d.slides));
e.scrolling=true;e.type="slide";e.go_to=a(d.container+":eq("+e.container+")").find(".current").next(d.slides);e.slide=e.go_to.index();}else{if(d.go_to_next_container&&a(d.container+":eq("+e.container+")").next(d.container).length>0){e.row_switch=true;
e.current=a(d.container+":eq("+e.container+")").next(d.container);e.type="container";e.go_to=e.current.index();e.direction="d";}else{e.scrolling=false;
}}}}}}e.update_history();}else{return false;}},switch_nav:function(e){var f=this;var c=f.settings;var d=a(c.nav).find(".slide-circle:eq("+e+")");if(!d.hasClass("active")){d.parent().find(".active").removeClass("active");
d.addClass("active");f.current=a(c.container+":eq("+e+")");f.move_to();}else{return false;}},move_to:function(){var e=this;var d=e.settings;var c=a(d.container+":eq("+e.go_to+")");
a(d.slideshow_class).find(".active").removeClass("active");e.container=e.go_to;if(d.container_before){d.container_before.call(this);}c.addClass("active");
if(!c.find(".current").length){c.find(d.slides+":first-child").addClass("current");}c.data("active-slide",c.find(".current").index());a(d.slideshow_class).stop(true,true).scrollTo(c,d.scroll_time,{easing:d.easing,onAfter:function(){var f=setTimeout(function(){e.scrolling=false;
},d.scroll_lockout);}});e.current=c;if(d.container_after){d.container_after.call(this);}e.direction="";},bind_statechange:function(){var d=this;var c=d.settings;
History.Adapter.bind(window,"statechange",function(){var f=History.getState();var h=f.url;if(h.substr(-1)=="/"){h=h.substr(0,h.length-1);}var g=c.base_url.length;
var e=h.substr(g);if(f.data.type=="container"&&c.multi_dir){var j=e.lastIndexOf("/");e=e.substr(0,j);}var k=false;a(c.container).each(function(){if(a(this).data("slug")==e){var m=a(this).index();
d.go_to=m;d.switch_nav(m);k=true;return false;}});if(!k&&c.multi_dir){var l=e.lastIndexOf("/")+1;var i=e.substr(l);i=parseInt(i,"")-1;d.go_to=i;d.slide_horizontal();
}});},multi_directional:function(){var d=this;var c=d.settings;a(c.container).each(function(){var e=a(this).find(c.slides).length;a(this).data("slides",e);
});},multi_dir_css:function(){var d=this;var c=d.settings;a(c.slides).css({width:d.win_width+"px",height:d.win_height+"px","float":"left"});a(c.container).each(function(){var f=a(this).data("slides");
var e=d.win_width*f;a(this).css({width:e+"px",position:"relative",left:"0px",top:"0px"});});},slide_horizontal:function(){var g=this;var e=g.settings;if(typeof g.go_to!=="undefined"){var c="";
var d;if(typeof g.go_to!=="number"){g.slide=g.go_to.index();d=g.go_to;}else{g.slide=g.go_to;d=a(e.container+":eq("+g.container+")").find(e.slides+":eq("+g.go_to+")");
}if(typeof g.container==="undefined"){g.container=d.parent().index();}if(e.slides_before){e.slides_before.call(this);}d.siblings().each(function(){if(a(this).hasClass("current")){a(this).removeClass("current");
}});d.parent().data("active-slide",g.slide);var f=a(e.container+":eq("+g.container+")").offset().left;if(f!="0px"){if(g.direction=="r"){c=f-g.win_width;
}else{if(g.direction=="l"){c=f+g.win_width;}}}else{c=0;}TweenMax.to(a(e.container+":eq("+g.container+")"),0.8,{css:{left:c+"px"},ease:Expo.easeInOut,onComplete:function(){var h=setTimeout(function(){g.scrolling=false;
},e.scroll_lockout);}});d.addClass("current");if(e.slides_after){e.slides_after.call(this);}g.direction="";}}};})(jQuery);