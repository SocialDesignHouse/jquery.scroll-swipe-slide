(function(a){a.fn.scrollSwipeSlide=function(d,c){if(typeof d==="object"){c=d;}else{if(typeof d==="string"){var e=this.data("_scrollSwipeSlide");if(e){if(a.fn.scrollSwipeSlide.default_settings[d]!==undefined){if(c!==undefined){e.settings[d]=c;
return true;}else{return e.settings[d];}}else{return false;}}else{return false;}}}c=a.extend({},a.fn.scrollSwipeSlide.default_settings,c||{});return this.each(function(){var f=a(this);
var g=jQuery.extend(true,{},c);var h=new b(g);h.scrollswipeslide=f;h.initialize();f.data("_scrollSwipeSlide",h);});};a.fn.scrollSwipeSlide.default_settings={use_scrollto:true,use_swipe:true,use_keypress:true,use_history:false,base_url:"",multi_dir:false,go_to_next_container:false,container:".project",container_before:"",container_after:"",slides:".slide",slides_before:"",slides_after:"",nav:".slide-nav",slideshow_class:".slideshow",easing:"easeInOutExpo",scroll_time:1000,scroll_lockout:20,width:"100%",height:"100%",skip_first:false,callback:""};
function b(c){this.scrollswipeslide=null;this.settings=c;return this;}b.prototype={initialize:function(){var e=this;var c=e.settings;e.build_nav();if(c.multi_dir){e.multi_directional();
}e.set_css();e.scrolling=false;e.this_scroll=0;e.last_scroll=0;e.container=0;e.slide=0;if(c.use_history&&c.base_url){var d=window.History;if(!d.enabled){e.history=false;
return false;}else{e.history=true;}}else{e.history=false;}e.check_url();e.bind_events();if(c.callback){c.callback.call(this);}},bind_events:function(){var c=this;
c.disable_scroll();a(window).resize(function(){c.set_css();});c.enable_mousewheel();c.bind_nav();if(c.settings.use_keypress){c.enable_keys();}if(c.settings.use_swipe){c.enable_swipe();
}if(c.settings.use_history&&c.history){c.bind_statechange();}},set_css:function(){var f=this;var d=f.settings;a(d.slideshow_class).css({overflow:"hidden"});
a(d.container).css({overflow:"hidden"});f.win_height=a(window).height();f.win_width=a(window).width();if(d.width=="100%"){a(d.slideshow_class).css({width:f.win_width+"px"});
a(d.container).css({width:f.win_width+"px"});}if(d.height=="100%"){a(d.slideshow_class).css({height:f.win_height+"px"});a(d.container).css({height:f.win_height+"px"});
}var c=20*a(d.nav).find(".slide-circle").length;var e=(f.win_height-c)/2;a(d.nav).css({margin:e+"px 0","z-index":99999999999});if(d.multi_dir){f.multi_dir_css();
}},build_nav:function(){var h=this;var g=h.settings;var j='<nav class="'+g.nav.substring(1)+'"><ul>';var c=a(g.slideshow_class).find(g.container).length;
for(var e=0;e<c;e++){var f="";if(e===0){f=" active";}j+='<li class="slide-circle'+f+'"></li>';}var d=g.container+":first-child";a(d).addClass("active");
a(d).find(g.slides+":first-child").addClass("current");j+="</ul></nav>";h.scrollswipeslide.prepend(j);},slide_it:function(){var f=this;var e=f.settings;
if(f.direction){var c,d;if(f.direction=="u"){if(a(e.slideshow_class).find(".active").prev(e.container).length>0){f.scrolling=true;f.go_to=a(e.slideshow_class).find(".active").prev(e.container);
f.slide_vertical();}else{f.scrolling=false;}}else{if(f.direction=="d"){if(a(e.slideshow_class).find(".active").next(e.container).length>0){f.scrolling=true;
f.go_to=a(e.slideshow_class).find(".active").next(e.container);f.slide_vertical();}else{f.scrolling=false;}}else{if(f.direction=="r"&&e.multi_dir){if(a(e.container+":eq("+f.container+")").find(".current").next(e.slides).length>0){f.scrolling=true;
f.go_to=a(e.container+":eq("+f.container+")").find(".current").next(e.slides);f.slide_horizontal();}else{if(e.go_to_next_container&&a(e.container+":eq("+f.container+")").next(e.container).length>0){f.go_to=a(e.container+":eq("+f.container+")").next(e.container);
f.direction="d";f.slide_vertical();}else{f.scrolling=false;}}}else{if(f.direction=="l"&&e.multi_dir){if(a(e.container+":eq("+f.container+")").find(".current").prev(e.slides).length>0){f.scrolling=true;
f.go_to=a(e.container+":eq("+f.container+")").find(".current").prev(e.slides);f.slide_horizontal();}else{if(e.go_to_next_container&&a(e.container+":eq("+f.container+")").prev(e.container).length>0){f.go_to=a(e.container+":eq("+f.container+")").prev(e.container);
f.direction="d";f.slide_vertical();}else{f.scrolling=false;}}}}}}}else{f.scrolling=false;}},slide_vertical:function(){var e=this;var d=e.settings;if(e.go_to){var c=e.go_to;
index=c.index();e.container=index;if(d.container_before){d.container_before.call(this);}a(d.nav).find(".active").removeClass("active");a(d.nav).find(".slide-circle:eq("+index+")").addClass("active");
a(d.slideshow_class).stop(true,true).scrollTo(c,d.scroll_time,{easing:d.easing,onAfter:function(){scroll_timeout=setTimeout(function(){e.scrolling=false;
},d.scroll_lockout);if(a(d.container+":eq("+index+")").find(".current").length<1){a(d.container+":eq("+index+")").find(d.slides+":first").addClass("current");
}}});e.current=c;e.update_history();a(d.sldeshow_class).find(".active").find(".current").removeClass("current");if(!c.hasClass("active")){a(d.slideshow_class).find(".active").removeClass("active");
c.addClass("active");}if(d.container_after){d.container_after.call(this);}}},update_history:function(){var g=this;if(g.history){var f=g.current;var i=f.attr("id");
var h=f.data("title");var c="/"+f.data("slug");var e=f.data("year");var d={id:i,title:h,year:e};History.pushState(d,h,c);}else{return false;}},check_url:function(){var f=this;
var e=f.settings;var c=window.location.href;if(c!=e.base_url){f.skip_first=false;var d=c.substring(e.base_url.length,window.location.href.length-1);a(e.container).each(function(){if(a(this).data("slug")==d){f.go_to=a(this).index();
var g=".slide-circle:eq("+f.go_to+")";if(!a(g).hasClass("active")){a(g).parent().find(".active").removeClass("active");a(g).addClass("active");a(e.slideshow_class).find(".active").removeClass("active");
f.container=a(this).index();f.go_to=a(this).index();f.move_to();}f.move_to();return false;}});}else{if(!e.skip_first){f.current=a(e.container+":first-child");
f.update_history();}a(e.container+":first-child").addClass("active");return false;}},disable_scroll:function(){var c=this;a(window).scroll(function(d){if(d.preventDefault){d.preventDefault();
}return false;});a(document).on("touchmove",function(d){if(d.preventDefault){d.preventDefault();}return false;});},enable_keys:function(){var d=this;var c=d.settings;
a(document).keyup(function(g){if(g.preventDefault){g.preventDefault();}var f=g.which;if(!d.scrolling){d.direction="";if(f==40||f==34){d.direction="d";}else{if(f==38||f==33){d.direction="u";
}else{if(f==36||f==35){return false;}else{if(c.multi_dir&&f==37){d.direction="l";}else{if(c.multi_dir&&f==39){d.direction="r";}}}}}d.slide_it();}return false;
});},enable_mousewheel:function(){var c=this;a("body").bind("mousewheel",function(f,g){if(f.preventDefault){f.preventDefault();}if(!c.settings.skip_first||c.this_scroll>0){if(!c.scrolling){c.this_scroll++;
if(c.this_scroll===0||c.last_scroll!=c.this_scroll){if(g>0){c.direction="u";}else{if(g<0){c.direction="d";}}c.slide_it();}c.last_scroll=c.this_scroll;}}else{c.scrolling=true;
var d=setTimeout(function(){c.scrolling=false;},750);c.this_scroll++;}});},enable_swipe:function(){var c=this;settings=c.settings;a("body").on("swipeup",function(d){if(d.preventDefault){d.preventDefault();
}c.direction="d";c.slide_it();return false;});a("body").on("swipedown",function(d){if(d.preventDefault){d.preventDefault();}c.direction="u";c.slide_it();
return false;});if(settings.multi_dir){a("body").on("swipeleft",function(d){if(d.preventDefault){d.preventDefault();}c.direction="r";c.slide_it();return false;
});a("body").on("swiperight",function(d){if(d.preventDefault){d.preventDefault();}c.direction="l";c.slide_it();return false;});}},bind_nav:function(){var c=this;
a("body").on("click",".slide-circle",function(d){if(!a(this).hasClass("active")){a(this).parent().find(".active").removeClass("active");a(this).addClass("active");
a(".slideshow").find(".active").removeClass("active");c.go_to=a(this).index();c.move_to();}else{return false;}});},move_to:function(){var e=this;var d=e.settings;
var c=a(".project:eq("+e.go_to+")");e.cotainer=e.go_to;if(d.container_before){d.container_before.call(this);}c.addClass("active");c.find(d.slides+":first-child").addClass("current");
a(d.slideshow_class).stop(true,true).scrollTo(c,d.scroll_time,{easing:d.easing,onAfter:function(){var f=setTimeout(function(){e.scrolling=false;},d.scroll_lockout);
}});e.current=c;e.update_history();if(d.container_after){d.container_after.call(this);}},bind_statechange:function(){History.Adapter.bind(window,"statechange",function(){var c=History.getState();
});},multi_directional:function(){var d=this;var c=d.settings;a(c.container).each(function(){var e=a(this).find(c.slides).length;a(this).data("slides",e);
});},multi_dir_css:function(){var d=this;var c=d.settings;a(c.slides).css({width:d.win_width+"px",height:d.win_height+"px","float":"left"});a(c.container).each(function(){var f=a(this).data("slides");
var e=d.win_width*f;a(this).css({width:e+"px",position:"relative",left:"0px",top:"0px"});});},slide_horizontal:function(){var g=this;var e=g.settings;if(g.go_to){var c="";
var d=g.go_to;g.slide=d.index();if(e.slides_before){e.slides_before.call(this);}var f=a(e.container+":eq("+g.container+")").offset().left;if(f!="0px"){if(g.direction=="r"){c=f-g.win_width;
}else{if(g.direction=="l"){c=f+g.win_width;}}}else{c=0;}TweenMax.to(a(e.container+":eq("+g.container+")"),0.8,{css:{left:c+"px"},ease:Expo.easeInOut,onComplete:function(){scroll_timeout=setTimeout(function(){g.scrolling=false;
},e.scroll_lockout);}});if(!d.hasClass("current")){a(e.container+":eq("+g.container+")").find(".current").removeClass("current");a(e.container+":eq("+g.container+")").find(e.slides+":eq("+g.slide+")").addClass("current");
}if(e.slides_after){e.slides_after.call(this);}}}};})(jQuery);