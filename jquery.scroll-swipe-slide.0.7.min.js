(function(b){b.fn.scrollSwipeSlide=function(g,f){if(typeof g==="object"){f=g;f=b.extend({},b.fn.scrollSwipeSlide.default_settings,f||{});return this.each(function(){var j=b(this);var i=jQuery.extend(true,{},f);var k=new c(i);k.scrollswipeslide=j;k.initialize();j.data("_scrollSwipeSlide",k)})}else{if(typeof g==="string"){switch(g){case"next_slide":case"prev_slide":case"next_con":case"prev_con":default:var h=this.data("_scrollSwipeSlide");if(h){if(b.fn.scrollSwipeSlide.default_settings[g]!==undefined){if(f!==undefined){h.settings[g]=f;return true}else{return h.settings[g]}}else{return false}}else{return false}}}else{if(typeof g==="number"){var e=g;var d=this.data("_scrollSwipeSlide");if(!d){return false}else{d.go_to=e;d.switch_nav(e)}}}}};function a(e,d){}b.fn.scrollSwipeSlide.default_settings={use_scrollto:true,use_swipe:true,use_keypress:true,use_history:false,enable_scroll:false,base_url:"",multi_dir:false,go_to_next_container:false,container:".project",container_before:"",container_after:"",slides:".slide",slides_before:"",slides_after:"",nav:".slide-nav",slideshow_class:".slideshow",easing:"easeInOutExpo",scroll_time:1000,scroll_lockout:20,width:"100%",height:"100%",skip_first:false,callback:""};function c(d){this.scrollswipeslide=null;this.settings=d;return this}c.prototype={initialize:function(){var f=this;var d=f.settings;f.build_nav();if(d.multi_dir){f.multi_directional()}f.set_css();f.scrolling=false;f.this_scroll=0;f.last_scroll=0;f.container=0;f.slide=0;if(d.use_history&&d.base_url){var e=window.History;if(!e.enabled){f.history=false;return false}else{f.history=true}}else{f.history=false}f.check_url();f.bind_events();if(d.callback){d.callback.call(this)}},bind_events:function(){var d=this;d.disable_scroll();b(window).resize(function(){d.set_css()});d.enable_mousewheel();d.bind_nav();if(d.settings.use_keypress){d.enable_keys()}if(d.settings.use_swipe){d.enable_swipe()}if(d.settings.use_history&&d.history){d.bind_statechange()}},set_css:function(){var g=this;var e=g.settings;b(e.slideshow_class).css({overflow:"hidden"});b(e.container).css({overflow:"hidden"});g.win_height=b(window).height();g.win_width=b(window).width();if(e.width=="100%"){b(e.slideshow_class).css({width:g.win_width+"px"});b(e.container).css({width:g.win_width+"px"})}if(e.height=="100%"){b(e.slideshow_class).css({height:g.win_height+"px"});b(e.container).css({height:g.win_height+"px"})}var d=20*b(e.nav).find(".slide-circle").length;var f=(g.win_height-d)/2;b(e.nav).css({margin:f+"px 0","z-index":99999999999});if(e.multi_dir){g.multi_dir_css()}},build_nav:function(){var j=this;var h=j.settings;var k='<nav class="'+h.nav.substring(1)+'"><ul>';var d=b(h.slideshow_class).find(h.container).length;for(var f=0;f<d;f++){var g="";if(f===0){g=" active"}k+='<li class="slide-circle'+g+'"><a href="javascript:void(0);"></a></li>'}var e=h.container+":first-child";b(e).addClass("active");b(e).find(h.slides+":first-child").addClass("current");k+="</ul></nav>";j.scrollswipeslide.prepend(k)},slide_it:function(){var e=this;var d=e.settings;if(e.direction){if(e.direction=="u"){if(b(d.slideshow_class).find(".active").prev(d.container).length>0){e.scrolling=true;e.go_to=b(d.slideshow_class).find(".active").prev(d.container);e.slide_vertical()}else{e.scrolling=false}}else{if(e.direction=="d"){if(b(d.slideshow_class).find(".active").next(d.container).length>0){e.scrolling=true;e.go_to=b(d.slideshow_class).find(".active").next(d.container);e.slide_vertical()}else{e.scrolling=false}}else{if(e.direction=="r"&&d.multi_dir){if(b(d.container+":eq("+e.container+")").find(".current").next(d.slides).length>0){e.scrolling=true;e.go_to=b(d.container+":eq("+e.container+")").find(".current").next(d.slides);e.slide_horizontal()}else{if(d.go_to_next_container&&b(d.container+":eq("+e.container+")").next(d.container).length>0){e.go_to=b(d.container+":eq("+e.container+")").next(d.container);e.direction="d";e.slide_vertical()}else{e.scrolling=false}}}else{if(e.direction=="l"&&d.multi_dir){if(b(d.container+":eq("+e.container+")").find(".current").prev(d.slides).length>0){e.scrolling=true;e.go_to=b(d.container+":eq("+e.container+")").find(".current").prev(d.slides);e.slide_horizontal()}else{if(d.go_to_next_container&&b(d.container+":eq("+e.container+")").prev(d.container).length>0){e.go_to=b(d.container+":eq("+e.container+")").prev(d.container);e.direction="d";e.slide_vertical()}else{e.scrolling=false}}}}}}}else{e.scrolling=false}},slide_vertical:function(){var g=this;var f=g.settings;if(g.go_to){var e=g.go_to;var d=e.index();g.container=d;if(f.container_before){f.container_before.call(this)}b(f.nav).find(".active").removeClass("active");b(f.nav).find(".slide-circle:eq("+d+")").addClass("active");b(f.slideshow_class).stop(true,true).scrollTo(e,f.scroll_time,{easing:f.easing,onAfter:function(){scroll_timeout=setTimeout(function(){g.scrolling=false},f.scroll_lockout);if(b(f.container+":eq("+d+")").find(".current").length<1){b(f.container+":eq("+d+")").find(f.slides+":first").addClass("current")}}});g.current=e;g.update_history();b(f.sldeshow_class).find(".active").find(".current").removeClass("current");if(!e.hasClass("active")){b(f.slideshow_class).find(".active").removeClass("active");e.addClass("active")}if(f.container_after){f.container_after.call(this)}}},update_history:function(){var h=this;if(h.history){var g=h.current;var j=g.attr("id");var i=g.data("title");var d="/"+g.data("slug");var f=g.data("year");var e={id:j,title:i,year:f};History.pushState(e,i,d)}else{return false}},check_url:function(){var g=this;var f=g.settings;var d=window.location.href;if(d!=f.base_url){g.skip_first=false;var e=d.substring(f.base_url.length,window.location.href.length-1);b(f.container).each(function(){if(b(this).data("slug")==e){g.go_to=b(this).index();var h=".slide-circle:eq("+g.go_to+")";if(!b(h).hasClass("active")){b(h).parent().find(".active").removeClass("active");b(h).addClass("active");b(f.slideshow_class).find(".active").removeClass("active");g.container=b(this).index();g.go_to=b(this).index();g.move_to()}g.move_to();return false}})}else{if(!f.skip_first){g.current=b(f.container+":first-child");g.update_history()}b(f.container+":first-child").addClass("active");return false}},disable_scroll:function(){var e=this;var d=e.settings;b(window).scroll(function(f){if(!d.enable_scroll){if(f.preventDefault){f.preventDefault()}return false}});b(document).on("touchmove",function(f){if(!d.enable_scroll){if(f.preventDefault){f.preventDefault()}return false}})},enable_keys:function(){var e=this;var d=e.settings;b(document).keyup(function(g){if(g.preventDefault){g.preventDefault()}if(d.use_keypress){var f=g.which;if(!e.scrolling){e.direction="";if(f==40||f==34){e.direction="d"}else{if(f==38||f==33){e.direction="u"}else{if(f==36||f==35){return false}else{if(d.multi_dir&&f==37){e.direction="l"}else{if(d.multi_dir&&f==39){e.direction="r"}}}}}e.slide_it()}}return false})},enable_mousewheel:function(){var e=this;var d=e.settings;b("body").bind("mousewheel",function(g,h){if(!d.enable_scroll){if(g.preventDefault){g.preventDefault()}if(!e.settings.skip_first||e.this_scroll>0){if(!e.scrolling){e.this_scroll++;if(e.this_scroll===0||e.last_scroll!=e.this_scroll){if(h>0){e.direction="u"}else{if(h<0){e.direction="d"}}e.slide_it()}e.last_scroll=e.this_scroll}}else{e.scrolling=true;var f=setTimeout(function(){e.scrolling=false},750);e.this_scroll++}}})},enable_swipe:function(){var d=this;settings=d.settings;b("body").on("swipeup",function(f){if(settings.use_swipe){if(f.preventDefault){f.preventDefault()}d.direction="d";d.slide_it();return false}}).on("swipedown",function(f){if(settings.use_swipe){if(f.preventDefault){f.preventDefault()}d.direction="u";d.slide_it();return false}});if(settings.multi_dir){b("body").on("swipeleft",function(f){if(settings.use_swipe&&settings.multi_dir){if(f.preventDefault){f.preventDefault()}d.direction="r";d.slide_it();return false}}).on("swiperight",function(f){if(settings.use_swipe&&settings.multi_dir){if(f.preventDefault){f.preventDefault()}d.direction="l";d.slide_it();return false}})}},bind_nav:function(){var d=this;b("body").on("click",".slide-circle",function(g){var f=b(this).index();d.go_to=f;d.switch_nav(f)})},switch_nav:function(f){var g=this;var d=g.settings;var e=b(d.nav).find(".slide-circle:eq("+f+")");if(!e.hasClass("active")){e.parent().find(".active").removeClass("active");e.addClass("active");e.go_to=b(this).index();g.move_to()}else{return false}},move_to:function(){var f=this;var e=f.settings;var d=b(".project:eq("+f.go_to+")");b(e.slideshow_class).find(".active").removeClass("active");f.container=f.go_to;if(e.container_before){e.container_before.call(this)}d.addClass("active");d.find(e.slides+":first-child").addClass("current");b(e.slideshow_class).stop(true,true).scrollTo(d,e.scroll_time,{easing:e.easing,onAfter:function(){var g=setTimeout(function(){f.scrolling=false},e.scroll_lockout)}});f.current=d;f.update_history();if(e.container_after){e.container_after.call(this)}},bind_statechange:function(){History.Adapter.bind(window,"statechange",function(){var d=History.getState()})},multi_directional:function(){var e=this;var d=e.settings;b(d.container).each(function(){var f=b(this).find(d.slides).length;b(this).data("slides",f)})},multi_dir_css:function(){var e=this;var d=e.settings;b(d.slides).css({width:e.win_width+"px",height:e.win_height+"px","float":"left"});b(d.container).each(function(){var g=b(this).data("slides");var f=e.win_width*g;b(this).css({width:f+"px",position:"relative",left:"0px",top:"0px"})})},slide_horizontal:function(){var h=this;var f=h.settings;if(h.go_to){var d="";var e=h.go_to;h.slide=e.index();if(f.slides_before){f.slides_before.call(this)}var g=b(f.container+":eq("+h.container+")").offset().left;if(g!="0px"){if(h.direction=="r"){d=g-h.win_width}else{if(h.direction=="l"){d=g+h.win_width}}}else{d=0}TweenMax.to(b(f.container+":eq("+h.container+")"),0.8,{css:{left:d+"px"},ease:Expo.easeInOut,onComplete:function(){scroll_timeout=setTimeout(function(){h.scrolling=false},f.scroll_lockout)}});if(!e.hasClass("current")){b(f.container+":eq("+h.container+")").find(".current").removeClass("current");b(f.container+":eq("+h.container+")").find(f.slides+":eq("+h.slide+")").addClass("current")}if(f.slides_after){f.slides_after.call(this)}}}}})(jQuery);